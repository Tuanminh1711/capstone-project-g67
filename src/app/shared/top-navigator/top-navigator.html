<!-- Top Navigator HTML -->
<nav class="top-nav">
  <!-- Mobile menu toggle button -->
  <button class="mobile-menu-toggle" (click)="toggleMobileMenu()">
    <span class="material-icons">{{ showMobileMenu ? 'close' : 'menu' }}</span>
  </button>

  <div class="logo">
    <a routerLink="/home" (click)="closeMobileMenu()">
      <img src="assets/image/logo-remove.png" alt="PlantCare Logo" class="logo-img" />
    </a>
    <a routerLink="/home" (click)="closeMobileMenu()" class="logo-text">PLANTCARE</a>
  </div>
  <div class="nav-links-actions">
    <div class="nav-links" [class.mobile-active]="showMobileMenu">
  <a class="nav-link" routerLink="/home" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" (click)="closeMobileMenu()">Trang chủ</a>
  <a class="nav-link" routerLink="/plant-info" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" (click)="closeMobileMenu()">Tìm kiếm cây cảnh</a>
  <a class="nav-link" routerLink="/user/my-garden" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" (click)="closeMobileMenu()">Khu vườn của tôi</a>
  <a class="nav-link" href="#" (click)="goToCareExpert(); closeMobileMenu(); $event.preventDefault();">Chăm sóc cùng chuyên gia</a>
  <a class="nav-link" routerLink="/about-us" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" (click)="closeMobileMenu()">Về chúng tôi</a>
    </div>
    <div class="nav-actions">
      @if (isLoggedIn) {
        <app-notification-dropdown></app-notification-dropdown>
        <span class="nav-icon support-dropdown" tabindex="0" [class.show-dropdown]="isSupportDropdownOpen">
          <span class="fa fa-headset" (click)="toggleSupportDropdown($event)"></span>
          <div class="support-dropdown-menu" (click)="$event.stopPropagation()">
            <a class="dropdown-item" (click)="openSendTicketDialog(); closeSupportDropdown()">
              <i class="fa fa-plus-circle"></i>
              <span>Gửi thư hỗ trợ</span>
            </a>
            <a class="dropdown-item" routerLink="/user/my-tickets" (click)="closeSupportDropdown()">
              <i class="fa fa-list-ul"></i>
              <span>Xem thư đã gửi</span>
            </a>
          </div>
        </span>
      }
      <span class="nav-icon user" tabindex="0" [class.show-dropdown]="showUserMenu">
        @if (isLoggedIn) {
          <img [src]="getUserAvatarUrl()" alt="avatar" class="user-avatar" (click)="toggleUserMenu($event)" />
        } @else {
          <span class="material-icons" (click)="toggleUserMenu($event)">account_circle</span>
        }
        @if (showUserMenu) {
          <div class="user-dropdown" (click)="$event.stopPropagation()">
            @if (isLoggedIn) {
              <a class="dropdown-item" routerLink="/view-user-profile" (click)="closeUserMenu()">Hồ sơ của tôi</a>
              <a class="dropdown-item" (click)="viewActivityLogs()">Nhật ký hoạt động</a>
              <a class="dropdown-item" routerLink="/user/report" (click)="closeUserMenu()">Báo cáo của tôi</a>
              <div class="dropdown-item" (click)="logout(); closeUserMenu()">Đăng xuất</div>
            } @else {
              <div class="dropdown-item" (click)="openLogin(); closeUserMenu()">Đăng nhập</div>
              <div class="dropdown-item" (click)="openRegister(); closeUserMenu()">Đăng ký</div>
            }
          </div>
        }
      </span>
    </div>
  </div>
</nav>
