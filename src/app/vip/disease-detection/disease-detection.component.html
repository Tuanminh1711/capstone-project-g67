<div class="container">
  <app-top-navigator></app-top-navigator>
  
  <!-- Header -->
  <div class="header">
    <h1>üî¨ Ph√°t Hi·ªán B·ªánh C√¢y Tr·ªìng</h1>
    <p class="subtitle">S·ª≠ d·ª•ng AI ƒë·ªÉ ch·∫©n ƒëo√°n v√† ƒëi·ªÅu tr·ªã b·ªánh c√¢y tr·ªìng m·ªôt c√°ch ch√≠nh x√°c</p>
  </div>

  <!-- Alert Messages -->
  <div *ngIf="errorMessage" class="alert error">
    <span class="alert-icon">‚ö†Ô∏è</span>
    {{ errorMessage }}
  </div>
  
  <div *ngIf="successMessage" class="alert success">
    <span class="alert-icon">‚úÖ</span>
    {{ successMessage }}
  </div>

  <!-- Navigation Tabs -->
  <div class="nav-tabs">
    <button 
      [class.active]="activeTab === 'image'"
      (click)="setActiveTab('image')"
      class="tab-btn">
      üì∑ Ph√°t hi·ªán qua ·∫£nh
    </button>
    <button 
      [class.active]="activeTab === 'symptoms'"
      (click)="setActiveTab('symptoms')"
      class="tab-btn">
      üîç Ph√°t hi·ªán qua tri·ªáu ch·ª©ng
    </button>
    <button 
      [class.active]="activeTab === 'history'"
      (click)="setActiveTab('history')"
      class="tab-btn">
      üìã L·ªãch s·ª≠ ph√°t hi·ªán
    </button>
    <button 
      [class.active]="activeTab === 'library'"
      (click)="setActiveTab('library')"
      class="tab-btn">
      üìö Th∆∞ vi·ªán b·ªánh
    </button>
  </div>

  <!-- Tab Content -->
  <div class="tab-content">
    
    <!-- ==================== IMAGE DETECTION TAB ==================== -->
    <div *ngIf="activeTab === 'image'" class="tab-panel">
      <div class="detection-card">
        <h2>üì∑ Ph√°t hi·ªán b·ªánh qua h√¨nh ·∫£nh</h2>
        <p class="card-description">
          T·∫£i l√™n ·∫£nh c√¢y b·ªã b·ªánh ƒë·ªÉ AI ph√¢n t√≠ch v√† ch·∫©n ƒëo√°n
        </p>

        <!-- Image Upload Area -->
        <div class="image-upload-area">
          <input 
            #imageInput
            type="file" 
            accept="image/*" 
            (change)="onImageSelected($event)"
            hidden>
          
          <div class="upload-placeholder" (click)="imageInput.click()">
            <div *ngIf="!selectedImage && !imagePreviewUrl" class="upload-icon">
              üì∑
            </div>
            <img 
              *ngIf="imagePreviewUrl" 
              [src]="imagePreviewUrl" 
              alt="Preview" 
              class="image-preview">
            
            <p *ngIf="!selectedImage && !imagePreviewUrl" class="upload-text">
              Click ƒë·ªÉ ch·ªçn ·∫£nh ho·∫∑c k√©o th·∫£ ·∫£nh v√†o ƒë√¢y
            </p>
            <p *ngIf="imagePreviewUrl" class="upload-text">
              Click ƒë·ªÉ thay ƒë·ªïi ·∫£nh
            </p>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <button 
            (click)="detectDiseaseFromImage()"
            [disabled]="!selectedImage || isDetectingFromImage"
            class="btn primary large">
            <span *ngIf="!isDetectingFromImage">üîç Ph√°t hi·ªán b·ªánh</span>
            <span *ngIf="isDetectingFromImage">‚è≥ ƒêang ph√¢n t√≠ch...</span>
          </button>
          
          <button 
            *ngIf="selectedImage || imageDetectionResult"
            (click)="clearImageDetection()"
            class="btn secondary">
            üóëÔ∏è X√≥a
          </button>
        </div>

        <!-- Detection Result -->
        <div *ngIf="imageDetectionResult" class="detection-result">
          <h3>üéØ K·∫øt qu·∫£ ph√°t hi·ªán</h3>
          <div class="result-content">
            <div class="result-header">
              <h4>{{ imageDetectionResult.detectedDisease }}</h4>
              <span class="confidence-badge">
                ƒê·ªô tin c·∫≠y: {{ (imageDetectionResult.confidenceScore * 100).toFixed(0) }}%
              </span>
            </div>
            
            <div class="result-details">
              <div class="detail-item">
                <strong>M·ª©c ƒë·ªô nghi√™m tr·ªçng:</strong>
                <span class="severity-badge" [style.background-color]="getSeverityColor(imageDetectionResult.severity)">
                  {{ imageDetectionResult.severity }}
                </span>
              </div>
              
              <div class="detail-item">
                <strong>Tri·ªáu ch·ª©ng:</strong>
                <p>{{ imageDetectionResult.symptoms }}</p>
              </div>
              
              <div class="detail-item">
                <strong>ƒêi·ªÅu tr·ªã ƒë∆∞·ª£c khuy·∫øn ngh·ªã:</strong>
                <p>{{ imageDetectionResult.recommendedTreatment }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ==================== SYMPTOMS DETECTION TAB ==================== -->
    <div *ngIf="activeTab === 'symptoms'" class="tab-panel">
      <div class="detection-card">
        <h2>üîç Ph√°t hi·ªán b·ªánh qua tri·ªáu ch·ª©ng</h2>
        <p class="card-description">
          M√¥ t·∫£ tri·ªáu ch·ª©ng c√¢y b·ªã b·ªánh ƒë·ªÉ AI ph√¢n t√≠ch v√† ch·∫©n ƒëo√°n
        </p>

        <!-- Symptoms Form -->
        <form [formGroup]="symptomsForm" class="symptoms-form">
          <div class="form-group">
            <label for="symptoms">M√¥ t·∫£ tri·ªáu ch·ª©ng b·ªánh *</label>
            <textarea 
              id="symptoms" 
              formControlName="symptoms" 
              placeholder="M√¥ t·∫£ chi ti·∫øt c√°c tri·ªáu ch·ª©ng b·∫°n quan s√°t th·∫•y tr√™n c√¢y..."
              rows="6"
              class="form-control">
            </textarea>
            <div *ngIf="isFieldInvalid('symptoms')" class="error-message">
              {{ getFieldError('symptoms') }}
            </div>
            <small class="form-help">
              V√≠ d·ª•: "C√¢y hoa h·ªìng c·ªßa t√¥i th√¢n m·ªÅm, ƒëen, c√¢y g√£y" ho·∫∑c "L√° c√¢y xu·∫•t hi·ªán ƒë·ªëm v√†ng, kh√¥ h√©o"
            </small>
          </div>

          <!-- Action Buttons -->
          <div class="action-buttons">
            <button 
              (click)="detectDiseaseFromSymptoms()"
              [disabled]="symptomsForm.invalid || isDetectingFromSymptoms"
              class="btn primary large">
              <span *ngIf="!isDetectingFromSymptoms">üîç Ph√¢n t√≠ch tri·ªáu ch·ª©ng</span>
              <span *ngIf="isDetectingFromSymptoms">‚è≥ ƒêang ph√¢n t√≠ch...</span>
            </button>
          </div>
        </form>

        <!-- Detection Result -->
        <div *ngIf="symptomsDetectionResult" class="detection-result">
          <h3>üéØ K·∫øt qu·∫£ ph√¢n t√≠ch tri·ªáu ch·ª©ng</h3>
          <div class="result-content">
            <div class="result-header">
              <h4>{{ symptomsDetectionResult.detectedDisease }}</h4>
              <span class="confidence-badge">
                ƒê·ªô tin c·∫≠y: {{ (symptomsDetectionResult.confidenceScore * 100).toFixed(0) }}%
              </span>
            </div>
            
            <div class="result-details">
              <div class="detail-item">
                <strong>M·ª©c ƒë·ªô nghi√™m tr·ªçng:</strong>
                <span class="severity-badge" [style.background-color]="getSeverityColor(symptomsDetectionResult.severity)">
                  {{ symptomsDetectionResult.severity }}
                </span>
              </div>
              
              <div class="detail-item">
                <strong>Tri·ªáu ch·ª©ng:</strong>
                <p>{{ symptomsDetectionResult.symptoms }}</p>
              </div>
              
              <div class="detail-item">
                <strong>ƒêi·ªÅu tr·ªã ƒë∆∞·ª£c khuy·∫øn ngh·ªã:</strong>
                <p>{{ symptomsDetectionResult.recommendedTreatment }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ==================== HISTORY TAB ==================== -->
    <div *ngIf="activeTab === 'history'" class="tab-panel">
      <div class="history-header">
        <h3>üìã L·ªãch s·ª≠ ph√°t hi·ªán b·ªánh</h3>
        <p>T·ªïng c·ªông {{ totalHistoryItems }} l·∫ßn ph√°t hi·ªán</p>
        <button (click)="refreshCurrentTab()" class="btn primary small">
          üîÑ L√†m m·ªõi l·ªãch s·ª≠
        </button>
      </div>

      <!-- Loading State -->
      <div *ngIf="isLoadingHistory" class="loading-state">
        <div class="spinner"></div>
        <p>ƒêang t·∫£i l·ªãch s·ª≠...</p>
      </div>

      <!-- Empty State -->
      <div *ngIf="!isLoadingHistory && detectionHistory.length === 0" class="empty-state">
        <div class="empty-icon">üìã</div>
        <p>Ch∆∞a c√≥ l·ªãch s·ª≠ ph√°t hi·ªán b·ªánh n√†o</p>
        <p class="empty-subtitle">H√£y th·ª≠ ph√°t hi·ªán b·ªánh qua ·∫£nh ho·∫∑c tri·ªáu ch·ª©ng ƒë·ªÉ b·∫Øt ƒë·∫ßu</p>
      </div>

      <!-- History List -->
      <div *ngIf="!isLoadingHistory && detectionHistory.length > 0" class="history-list modern">
        <div *ngFor="let record of detectionHistory" class="history-card">
          <div class="history-card-header">
            <div>
              <span class="history-disease-name">{{ record.detectedDisease }}</span>
              <span class="history-severity-badge" [ngClass]="'sev-' + record.severity.toLowerCase()">{{ record.severity }}</span>
            </div>
            <div class="history-method">
              {{ record.detectionMethod === 'IMAGE' ? 'Qua ·∫£nh' : 'Qua tri·ªáu ch·ª©ng' }}
            </div>
          </div>
          <div class="history-card-body">
            <div class="history-row">
              <span class="history-label">Tri·ªáu ch·ª©ng:</span>
              <span class="history-value">{{ record.symptoms }}</span>
            </div>
            <div class="history-row">
              <span class="history-label">ƒêi·ªÅu tr·ªã:</span>
              <span class="history-value">{{ record.recommendedTreatment }}</span>
            </div>
            <div class="history-row">
              <span class="history-label">ƒê·ªô tin c·∫≠y:</span>
              <span class="history-value">{{ (record.confidenceScore * 100).toFixed(0) }}%</span>
            </div>
            <div class="history-row">
              <span class="history-label">Tr·∫°ng th√°i:</span>
              <span class="history-value">{{ record.status === 'DETECTED' ? 'ƒê√£ ph√°t hi·ªán' : record.status }}</span>
              <span *ngIf="record.isConfirmed" class="history-confirmed">ƒê√£ x√°c nh·∫≠n</span>
            </div>
            <div class="history-row">
              <span class="history-label">Th·ªùi gian:</span>
              <span class="history-value">{{ record.detectedAt | date:'dd/MM/yyyy HH:mm' }}</span>
            </div>
            <div class="history-row">
              <span class="history-label">Phi√™n b·∫£n AI:</span>
              <span class="history-value">{{ record.aiModelVersion }}</span>
            </div>
            <div *ngIf="record.expertNotes" class="history-row">
              <span class="history-label">Ghi ch√∫ chuy√™n gia:</span>
              <span class="history-value">{{ record.expertNotes }}</span>
            </div>
            <div *ngIf="record.treatmentResult" class="history-row">
              <span class="history-label">KQ ƒëi·ªÅu tr·ªã:</span>
              <span class="history-value">{{ record.treatmentResult }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ==================== LIBRARY TAB ==================== -->
    <div *ngIf="activeTab === 'library'" class="tab-panel">
      <div class="library-header">
        <h3>üìö Th∆∞ vi·ªán b·ªánh th∆∞·ªùng g·∫∑p</h3>
        <p class="card-description">
          Kh√°m ph√° c∆° s·ªü d·ªØ li·ªáu to√†n di·ªán v·ªÅ c√°c b·ªánh c√¢y tr·ªìng ph·ªï bi·∫øn, 
          bao g·ªìm tri·ªáu ch·ª©ng, ph∆∞∆°ng ph√°p ƒëi·ªÅu tr·ªã v√† bi·ªán ph√°p ph√≤ng ng·ª´a
        </p>
        <button (click)="refreshCurrentTab()" class="btn primary small">
          üîÑ L√†m m·ªõi th∆∞ vi·ªán
        </button>
      </div>

      <!-- Loading State -->
      <div *ngIf="isLoadingLibrary" class="loading-state">
        <div class="spinner"></div>
        <p>ƒêang t·∫£i th∆∞ vi·ªán b·ªánh...</p>
      </div>

      <!-- Filter Controls -->
      <div *ngIf="!isLoadingLibrary" class="filter-controls" [formGroup]="filterForm">
        <div class="search-box">
          <input 
            type="text" 
            formControlName="searchKeyword"
            placeholder="üîç T√¨m ki·∫øm b·ªánh, tri·ªáu ch·ª©ng ho·∫∑c c√¢y tr·ªìng..."
            class="search-input">
        </div>

        <div class="filter-buttons">
          <button 
            (click)="toggleAdvancedFilters()"
            class="btn secondary">
            {{ showAdvancedFilters ? 'üîΩ ·∫®n b·ªô l·ªçc n√¢ng cao' : 'üîº Hi·ªán b·ªô l·ªçc n√¢ng cao' }}
          </button>
          
          <button 
            (click)="clearFilters()"
            class="btn ghost">
            üóëÔ∏è X√≥a b·ªô l·ªçc
          </button>
          
          <button 
            (click)="exportToCSV()"
            class="btn success">
            üì• Xu·∫•t CSV
          </button>
        </div>
      </div>

      <!-- Advanced Filters -->
      <div *ngIf="!isLoadingLibrary && showAdvancedFilters" class="advanced-filters" [formGroup]="filterForm">
        <div class="filter-row">
          <div class="filter-group">
            <label>Lo·∫°i b·ªánh:</label>
            <select formControlName="selectedCategory" class="form-control">
              <option *ngFor="let category of categories" [value]="category">
                {{ category === 'all' ? 'T·∫•t c·∫£ lo·∫°i b·ªánh' : category }}
              </option>
            </select>
          </div>

          <div class="filter-group">
            <label>M·ª©c ƒë·ªô nghi√™m tr·ªçng:</label>
            <select formControlName="selectedSeverity" class="form-control">
              <option *ngFor="let severity of severities" [value]="severity">
                {{ severity === 'all' ? 'T·∫•t c·∫£ m·ª©c ƒë·ªô' : severity }}
              </option>
            </select>
          </div>

          <div class="filter-group">
            <label>
              <input type="checkbox" formControlName="showOnlyCommon">
              Ch·ªâ hi·ªán b·ªánh ph·ªï bi·∫øn
            </label>
          </div>
        </div>

        <div class="filter-row">
          <div class="filter-group">
            <label>S·∫Øp x·∫øp theo:</label>
            <select formControlName="sortBy" class="form-control">
              <option value="name">T√™n b·ªánh</option>
              <option value="category">Lo·∫°i b·ªánh</option>
              <option value="severity">M·ª©c ƒë·ªô nghi√™m tr·ªçng</option>
              <option value="common">M·ª©c ƒë·ªô ph·ªï bi·∫øn</option>
            </select>
          </div>

          <div class="filter-group">
            <label>Th·ª© t·ª±:</label>
            <select formControlName="sortOrder" class="form-control">
              <option value="asc">TƒÉng d·∫ßn (A-Z)</option>
              <option value="desc">Gi·∫£m d·∫ßn (Z-A)</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Filtering State -->
      <div *ngIf="!isLoadingLibrary && isFiltering" class="filtering-state">
        <div class="spinner small"></div>
        <p>ƒêang √°p d·ª•ng b·ªô l·ªçc...</p>
      </div>

      <!-- Results Summary -->
      <div *ngIf="!isLoadingLibrary && !isFiltering && filteredDiseases.length > 0" class="results-summary">
        <p>
          üéØ Hi·ªÉn th·ªã {{ (currentPage * pageSize) + 1 }}-{{ (currentPage + 1) * pageSize > totalItems ? totalItems : (currentPage + 1) * pageSize }} 
          trong t·ªïng s·ªë {{ totalItems }} b·ªánh ƒë∆∞·ª£c t√¨m th·∫•y
        </p>
      </div>

      <!-- Empty State -->
      <div *ngIf="!isLoadingLibrary && !isFiltering && filteredDiseases.length === 0" class="empty-state">
        <div class="empty-icon">üîç</div>
        <p>Kh√¥ng t√¨m th·∫•y b·ªánh n√†o ph√π h·ª£p v·ªõi b·ªô l·ªçc</p>
        <p class="empty-subtitle">H√£y th·ª≠ thay ƒë·ªïi t·ª´ kh√≥a t√¨m ki·∫øm ho·∫∑c b·ªô l·ªçc</p>
        <button (click)="clearFilters()" class="btn primary">üîÑ X√≥a b·ªô l·ªçc</button>
      </div>

      <!-- Disease Grid -->
      <div *ngIf="!isLoadingLibrary && !isFiltering && filteredDiseases.length > 0" class="disease-grid">
        <div *ngFor="let disease of paginatedDiseases" class="disease-card" (click)="selectDisease(disease)">
          <div class="disease-card-header">
            <div class="disease-title-row">
              <span class="disease-name">{{ disease.name }}</span>
              <span class="disease-category">{{ disease.category }}</span>
            </div>
            <div class="disease-meta-row">
              <span class="severity-badge" [ngClass]="'sev-' + disease.severity.toLowerCase()">{{ disease.severity }}</span>
              <span class="common-badge" *ngIf="disease.commonality === 1">‚≠ê Ph·ªï bi·∫øn</span>
            </div>
          </div>
          <div class="disease-card-body">
            <div class="disease-scientific">{{ disease.scientificName }}</div>
            <div class="disease-symptoms">
              <span class="disease-label">üåø Tri·ªáu ch·ª©ng:</span>
              <ul>
                <li *ngFor="let symptom of disease.symptoms">{{ symptom }}</li>
              </ul>
            </div>
            <div class="disease-plants">
              <span class="disease-label">üå± C√¢y b·ªã ·∫£nh h∆∞·ªüng:</span>
              <div class="plant-tags">
                <span *ngFor="let plant of disease.affectedPlants" class="plant-tag">{{ plant }}</span>
              </div>
            </div>
          </div>
          <div class="disease-actions">
            <button class="btn primary" (click)="selectDisease(disease); $event.stopPropagation()">
              üîç Xem chi ti·∫øt
            </button>
            <button class="btn secondary" (click)="loadTreatmentGuide(disease.name); $event.stopPropagation()">
              üíä H∆∞·ªõng d·∫´n ƒëi·ªÅu tr·ªã
            </button>
          </div>
        </div>
      </div>

      <!-- Pagination -->
      <div *ngIf="!isLoadingLibrary && !isFiltering && totalPages > 1" class="pagination">
        <button 
          (click)="prevPage()" 
          [disabled]="!hasPrevPage"
          class="btn pagination-btn">
          ‚Üê Trang tr∆∞·ªõc
        </button>
        
        <div class="page-numbers">
          <button 
            *ngFor="let page of pageNumbers" 
            (click)="goToPage(page)"
            [class.active]="page === currentPage"
            class="btn page-btn">
            {{ page + 1 }}
          </button>
        </div>
        
        <button 
          (click)="nextPage()" 
          [disabled]="!hasNextPage"
          class="btn pagination-btn">
          Trang sau ‚Üí
        </button>
      </div>
    </div>
  </div>

  <!-- ==================== MODALS ==================== -->
  
  <!-- Disease Detail Modal -->
  <div *ngIf="selectedDisease" class="modal-overlay" (click)="closeDiseaseDetail()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>üî¨ {{ selectedDisease.name }}</h3>
        <button (click)="closeDiseaseDetail()" class="close-btn">‚úï</button>
      </div>
      
      <div class="modal-body">
        <div class="disease-detail">
          <div class="detail-row">
            <strong>üî¨ T√™n khoa h·ªçc:</strong> 
            <span class="scientific-name">{{ selectedDisease.scientificName }}</span>
          </div>
          
          <div class="detail-row">
            <strong>üìÇ Danh m·ª•c:</strong> 
            <span class="category-badge">{{ selectedDisease.category }}</span>
          </div>
          
          <div class="detail-row">
            <strong>‚ö†Ô∏è M·ª©c ƒë·ªô nghi√™m tr·ªçng:</strong> 
            <span class="severity-badge" [style.background-color]="getSeverityColor(selectedDisease.severity)">
              {{ selectedDisease.severity }}
            </span>
          </div>
          
          <div class="detail-section">
            <h4>üåø Tri·ªáu ch·ª©ng b·ªánh:</h4>
            <ul>
              <li *ngFor="let symptom of selectedDisease.symptoms">{{ symptom }}</li>
            </ul>
          </div>
          
          <div class="detail-section">
            <h4>üíä H∆∞·ªõng d·∫´n ƒëi·ªÅu tr·ªã:</h4>
            <p>{{ selectedDisease.treatment }}</p>
          </div>
          
          <div class="detail-section">
            <h4>üõ°Ô∏è Bi·ªán ph√°p ph√≤ng ng·ª´a:</h4>
            <p>{{ selectedDisease.prevention }}</p>
          </div>

          <div class="detail-section">
            <h4>üå± C√¢y b·ªã ·∫£nh h∆∞·ªüng:</h4>
            <div class="plant-tags">
              <span *ngFor="let plant of selectedDisease.affectedPlants" class="plant-tag">{{ plant }}</span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="modal-footer">
        <button 
          (click)="loadTreatmentGuide(selectedDisease.name)"
          class="btn primary">
          üíä Xem h∆∞·ªõng d·∫´n ƒëi·ªÅu tr·ªã chi ti·∫øt
        </button>
        
        <button (click)="closeDiseaseDetail()" class="btn secondary">
          ‚úï ƒê√≥ng
        </button>
      </div>
    </div>
  </div>

  <!-- Treatment Guide Modal -->
  <div *ngIf="selectedTreatmentGuide" class="modal-overlay" (click)="closeTreatmentGuide()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>üíä H∆∞·ªõng d·∫´n ƒëi·ªÅu tr·ªã: {{ selectedTreatmentGuide.diseaseName }}</h3>
        <button (click)="closeTreatmentGuide()" class="modal-close">√ó</button>
      </div>
      
      <div class="modal-body">
        <div class="treatment-section">
          <h4>üíä Ph∆∞∆°ng ph√°p ƒëi·ªÅu tr·ªã</h4>
          <p>{{ selectedTreatmentGuide.treatment }}</p>
        </div>
        
        <div class="prevention-section">
          <h4>üõ°Ô∏è Bi·ªán ph√°p ph√≤ng ng·ª´a</h4>
          <p>{{ selectedTreatmentGuide.prevention }}</p>
        </div>
        
        <div class="medications-section" *ngIf="selectedTreatmentGuide.medications && selectedTreatmentGuide.medications.length > 0">
          <h4>üíä Thu·ªëc ƒëi·ªÅu tr·ªã khuy·∫øn ngh·ªã</h4>
          <ul>
            <li *ngFor="let medication of selectedTreatmentGuide.medications">{{ medication }}</li>
          </ul>
        </div>
        
        <div class="duration-section" *ngIf="selectedTreatmentGuide.duration">
          <h4>‚è±Ô∏è Th·ªùi gian ƒëi·ªÅu tr·ªã d·ª± ki·∫øn</h4>
          <p>{{ selectedTreatmentGuide.duration }}</p>
        </div>
        
        <div class="notes-section" *ngIf="selectedTreatmentGuide.notes">
          <h4>üìù Ghi ch√∫ quan tr·ªçng</h4>
          <p>{{ selectedTreatmentGuide.notes }}</p>
        </div>

        <!-- Additional Treatment Information -->
        <div class="treatment-overview">
          <div class="overview-item">
            <strong>üî¨ B·ªánh:</strong>
            <span>{{ selectedTreatmentGuide.diseaseName }}</span>
          </div>
          <div class="overview-item">
            <strong>üìÖ C·∫≠p nh·∫≠t:</strong>
            <span>{{ selectedTreatmentGuide.lastUpdated || 'G·∫ßn ƒë√¢y' }}</span>
          </div>
          <div class="overview-item">
            <strong>üë®‚Äç‚öïÔ∏è Ngu·ªìn:</strong>
            <span>{{ selectedTreatmentGuide.source || 'C∆° s·ªü d·ªØ li·ªáu y t·∫ø th·ª±c v·∫≠t' }}</span>
          </div>
        </div>
      </div>
      
      <div class="modal-footer">
        <button (click)="closeTreatmentGuide()" class="btn primary">‚úÖ ƒê√£ hi·ªÉu</button>
        <button (click)="closeTreatmentGuide()" class="btn secondary">‚úï ƒê√≥ng</button>
      </div>
    </div>
  </div>
</div>
