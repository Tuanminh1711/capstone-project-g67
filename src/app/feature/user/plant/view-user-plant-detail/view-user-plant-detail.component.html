<app-top-navigator></app-top-navigator>
<div class="user-plant-detail-container professional">
  <div class="plant-detail-grid professional">
    <div class="plant-detail-left professional">
      <div class="plant-nickname-title">{{ plant?.nickname || 'Ch∆∞a ƒë·∫∑t t√™n' }}</div>
      <div class="plant-avatar-row-all plant-avatar-row-all-center plant-avatar-row-no-bg">
        <ng-container *ngIf="plant?.imageUrls && plant.imageUrls.length > 0; else noImages">
          <div class="plant-avatar big-horizontal professional plant-avatar-no-bg" *ngFor="let img of plant.imageUrls.slice(-3)">
            <img class="plant-main-img big big-horizontal plant-main-img-no-bg" [src]="getImageUrl(img)" alt="·∫¢nh c√¢y" (error)="onImageError($event)" />
          </div>
        </ng-container>
        <ng-template #noImages>
          <div class="no-image-placeholder big big-horizontal plant-avatar-no-bg">
            <span class="placeholder-icon">üå±</span>
          </div>
        </ng-template>
      </div>
      <div class="plant-date-location-row">
        <span class="plant-date-row-item">{{ plant?.plantingDate ? (plant.plantingDate | date:'dd/MM/yyyy') : 'Ch∆∞a c·∫≠p nh·∫≠t' }}</span>
        <span class="plant-date-row-sep" *ngIf="plant?.locationInHouse">|</span>
        <span class="plant-date-row-item" *ngIf="plant?.locationInHouse">{{ plant.locationInHouse }}</span>
      </div>
    </div>
    <div class="plant-detail-right professional">
      <div class="care-reminders-section professional">
        <div class="care-reminders-title professional">L·ªãch nh·∫Øc nh·ªü chƒÉm s√≥c</div>
        <ng-container *ngIf="loadingCareReminders">
          <div class="care-reminders-loading professional">
            <div class="loading-spinner"></div>
            <span>ƒêang t·∫£i l·ªãch nh·∫Øc nh·ªü...</span>
          </div>
        </ng-container>
        <ng-container *ngIf="!loadingCareReminders && careReminders.length > 0">
          <div class="care-reminders-tasklist">
            <div class="tasklist-cards two-col">
              <div class="tasklist-card" *ngFor="let reminder of careReminders">
                <div class="tasklist-card-header">
                  <span class="tasklist-card-title">{{ reminder.careTypeName }}</span>
                </div>
                <div class="tasklist-card-info">
                  <div class="tasklist-card-row">
                    <span class="tasklist-label">Tr·∫°ng th√°i:</span>
                    <span class="tasklist-value">{{ reminder.enabled ? 'ƒêang b·∫≠t' : 'T·∫°m t·∫Øt' }}</span>
                  </div>
                  <div class="tasklist-card-row">
                    <span class="tasklist-label">Ng√†y ti·∫øp theo:</span>
                    <span class="tasklist-value">{{ reminder.nextCareDate ? (reminder.nextCareDate | date:'dd/MM/yyyy') : '---' }}</span>
                  </div>
                  <div class="tasklist-card-row">
                    <span class="tasklist-label">T·∫ßn su·∫•t:</span>
                    <span class="tasklist-value">{{ reminder.frequencyDays ? (reminder.frequencyDays + ' ng√†y') : '---' }}</span>
                  </div>
                  <div class="tasklist-card-row" *ngIf="reminder.reminderTime">
                    <span class="tasklist-label">Th·ªùi gian nh·∫Øc:</span>
                    <span class="tasklist-value">{{ reminder.reminderTime }}</span>
                  </div>
                  <div class="tasklist-card-row" *ngIf="reminder.customMessage">
                    <span class="tasklist-label">Ghi ch√∫:</span>
                    <span class="tasklist-value">{{ reminder.customMessage }}</span>
                  </div>
                </div>
                <div class="tasklist-card-footer">
                  <span class="tasklist-date">{{ reminder.nextCareDate ? (reminder.nextCareDate | date:'dd/MM/yyyy') : '' }}</span>
                </div>
              </div>
            </div>
          </div>
        </ng-container>
        <ng-container *ngIf="!loadingCareReminders && careReminders.length === 0">
          <div class="care-reminders-error professional">Kh√¥ng c√≥ l·ªãch nh·∫Øc nh·ªü.</div>
        </ng-container>
      </div>
    </div>
  </div>
</div>
