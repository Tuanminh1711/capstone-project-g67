<div class="modern-support-dialog">
  <!-- Header -->
  <div class="dialog-header">
    <button class="close-button" (click)="close()" aria-label="Đóng">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
      </svg>
    </button>
    
    <div class="header-content">
      <div class="header-icon">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
          <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
        </svg>
      </div>
      <h2 class="dialog-title">Yêu cầu hỗ trợ</h2>
    </div>
  </div>

  <!-- Form Content -->
  <div class="dialog-body">
    <form (ngSubmit)="onSubmit()" autocomplete="off" class="support-form">
      
      <!-- Title Field -->
      <div class="form-group">
        <label for="title" class="form-label">
          <span class="label-text">Tiêu đề</span>
          <span class="required-mark">*</span>
        </label>
        <div class="input-wrapper">
          <input 
            id="title"
            class="form-input" 
            type="text" 
            name="title"
            [(ngModel)]="title"
            placeholder="Mô tả ngắn gọn vấn đề của bạn"
            maxlength="100"
            required />
          <div class="input-border"></div>
        </div>
      </div>

      <!-- Description Field -->
      <div class="form-group">
        <label for="description" class="form-label">
          <span class="label-text">Mô tả chi tiết</span>
          <span class="required-mark">*</span>
        </label>
        <div class="input-wrapper">
          <textarea 
            id="description"
            class="form-textarea" 
            name="description"
            [(ngModel)]="description"
            placeholder="Hãy mô tả chi tiết vấn đề bạn gặp phải để chúng tôi có thể hỗ trợ tốt nhất..."
            rows="4"
            maxlength="1000"
            required></textarea>
          <div class="input-border"></div>
        </div>
      </div>

      <!-- Image Upload -->
      <div class="form-group">
        <label class="form-label">
          <span class="label-text">Hình ảnh minh họa (Tùy chọn)</span>
        </label>
        
        <div class="file-upload-area">
          <input 
            type="file" 
            id="imageUpload"
            accept="image/*" 
            (change)="onImageSelected($event)"
            hidden />
          
          <label for="imageUpload" class="upload-button" *ngIf="!imagePreview">
            <div class="upload-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
              </svg>
            </div>
            <div class="upload-text">
              <span class="upload-title">Chọn hình ảnh</span>
              <span style="color: #888; font-size: 13px; display: block;">Dung lượng tối đa: 20MB</span>
            </div>
          </label>

          <!-- Image Preview -->
          <div class="image-preview-container" *ngIf="imagePreview">
            <div class="image-preview">
              <img [src]="imagePreview" alt="Hình ảnh xem trước" />
              <button type="button" class="remove-image-btn" (click)="removeImage()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
              </button>
            </div>
            <div class="image-info">
              <span class="file-name">{{ selectedFileName }}</span>
              <button type="button" class="change-image-btn" (click)="removeImage()">
                Thay đổi hình ảnh
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="form-actions">
        <button 
          type="submit" 
          [disabled]="isSubmitting || !title.trim() || !description.trim()"
          class="submit-button"
          [class.loading]="isSubmitting">
          
          <div class="button-content">
            <svg *ngIf="isSubmitting" class="loading-spinner" width="20" height="20" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none" opacity="0.3"/>
              <path d="M4 12a8 8 0 018-8V2.5" stroke="currentColor" stroke-width="4" fill="none"/>
            </svg>
            
            <svg *ngIf="!isSubmitting" class="send-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
            </svg>
            
            <span class="button-text">
              {{ isSubmitting ? 'Đang gửi...' : 'Gửi yêu cầu hỗ trợ' }}
            </span>
          </div>
        </button>
      </div>

    </form>
  </div>

</div>
