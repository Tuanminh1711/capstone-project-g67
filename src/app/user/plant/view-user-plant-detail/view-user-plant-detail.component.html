<app-top-navigator></app-top-navigator>
<div class="user-plant-detail-container">
  <ng-container *ngIf="loading">
    <div class="loading-bar">
      <div class="loading-spinner"></div>
      <span>Äang táº£i chi tiáº¿t cÃ¢y...</span>
    </div>
  </ng-container>
  <ng-container *ngIf="!loading && errorMsg">
    <div class="error-msg">
      <span class="error-icon">ğŸ¥€</span>
      <div>{{ errorMsg }}</div>
    </div>
  </ng-container>
  <ng-container *ngIf="!loading && plant">
    <div class="plant-header">
      <h2>{{ plant.nickname || 'ChÆ°a Ä‘áº·t tÃªn' }}</h2>
      <span class="plant-id">#{{ plant.userPlantId }}</span>
    </div>
    
    <!-- Hiá»ƒn thá»‹ áº£nh hoáº·c placeholder -->
    <div class="plant-images">
      <ng-container *ngIf="plant.imageUrls && plant.imageUrls.length > 0; else noImages">
        <img *ngFor="let img of plant.imageUrls" [src]="img" alt="áº¢nh cÃ¢y" class="plant-img" 
             (error)="onImageError($event)" />
      </ng-container>
      <ng-template #noImages>
        <div class="no-image-placeholder">
          <span class="placeholder-icon">ğŸŒ±</span>
          <span class="placeholder-text">ChÆ°a cÃ³ áº£nh</span>
        </div>
      </ng-template>
    </div>
    
    <div class="plant-info">
      <div class="info-row"><b>NgÃ y trá»“ng:</b> <span>{{ plant.plantingDate ? (plant.plantingDate | date:'dd/MM/yyyy') : 'ChÆ°a cáº­p nháº­t' }}</span></div>
      <div class="info-row"><b>Vá»‹ trÃ­:</b> <span>{{ plant.locationInHouse || 'ChÆ°a cáº­p nháº­t' }}</span></div>
    </div>

    <!-- Lá»‹ch nháº¯c nhá»Ÿ chÄƒm sÃ³c -->
    <div class="care-reminders-section">
      <h3 class="care-reminders-title">ğŸ—“ï¸ Lá»‹ch nháº¯c nhá»Ÿ chÄƒm sÃ³c</h3>
      <ng-container *ngIf="loadingCareReminders">
        <div class="care-reminders-loading">
          <div class="loading-spinner"></div>
          <span>Äang táº£i lá»‹ch nháº¯c nhá»Ÿ...</span>
        </div>
      </ng-container>
      <ng-container *ngIf="!loadingCareReminders && careRemindersError">
        <div class="care-reminders-error">{{ careRemindersError }}</div>
      </ng-container>
      <ng-container *ngIf="!loadingCareReminders && !careRemindersError && careReminders.length > 0">
        <div class="care-reminders-list">
          <div class="care-reminder-card" *ngFor="let reminder of careReminders">
            <div class="reminder-header">
              <span class="reminder-type">{{ reminder.careTypeName }}</span>
              <span class="reminder-status" [class.active]="reminder.enabled">{{ reminder.enabled ? 'Äang báº­t' : 'Táº¡m táº¯t' }}</span>
            </div>
            <div class="reminder-info">
              <span class="reminder-next">Láº§n tá»›i: <b>{{ reminder.nextCareDate ? (reminder.nextCareDate | date:'dd/MM/yyyy') : '---' }}</b></span>
              <span class="reminder-freq">Táº§n suáº¥t: {{ reminder.frequencyDays ? (reminder.frequencyDays + ' ngÃ y') : '---' }}</span>
              <span class="reminder-time" *ngIf="reminder.reminderTime">â° {{ reminder.reminderTime }}</span>
            </div>
            <div class="reminder-custom-message" *ngIf="reminder.customMessage">ğŸ’¬ {{ reminder.customMessage }}</div>
          </div>
        </div>
      </ng-container>
    </div>
    
  
  </ng-container>
</div>
