<app-top-navigator></app-top-navigator>
<div class="user-plant-detail-container">
  <div class="plant-main-flex">
    <div class="plant-info-flex-row">
      <div class="plant-avatar-info">
        <div class="plant-avatar big-square">
          @if (plant?.imageUrls && plant.imageUrls.length > 0) {
            <img class="plant-main-img big big-square" [src]="plant.imageUrls[0]" alt="áº¢nh cÃ¢y" (error)="onImageError($event)" />
          } @else {
            <div class="no-image-placeholder big big-square">
              <span class="placeholder-icon">ğŸŒ±</span>
            </div>
          }
        </div>
        <div class="plant-id highlight">#{{ plant?.userPlantId }}</div>
        <div class="plant-name">{{ plant?.nickname || 'ChÆ°a Ä‘áº·t tÃªn' }}</div>
      </div>
      <div class="plant-info-details">
        <div class="info-row">
          <span class="info-label">NgÃ y trá»“ng:</span>
          <span class="info-value">{{ plant?.plantingDate ? (plant.plantingDate | date:'dd/MM/yyyy') : 'ChÆ°a cáº­p nháº­t' }}</span>
        </div>
        <div class="info-row">
          <span class="info-label">Vá»‹ trÃ­:</span>
          <span class="info-value">{{ plant?.locationInHouse || 'ChÆ°a cáº­p nháº­t' }}</span>
        </div>
      </div>
    </div>
    <div class="care-reminders-section">
      <div class="care-reminders-title">Lá»‹ch nháº¯c nhá»Ÿ chÄƒm sÃ³c</div>
      @if (loadingCareReminders) {
        <div class="care-reminders-loading">
          <div class="loading-spinner"></div>
          <span>Äang táº£i lá»‹ch nháº¯c nhá»Ÿ...</span>
        </div>
      }
      @if (!loadingCareReminders && careReminders.length > 0) {
        <div class="care-reminders-list flex-row">
          @for (reminder of careReminders; track $index) {
            <div class="care-reminder-card modern-card">
              <div class="reminder-header">
                <span class="reminder-type">
                  @if (reminder.careTypeId === 1) {<span>ğŸ’§</span>}
                  @else if (reminder.careTypeId === 2) {<span>ğŸŒ±</span>}
                  @else if (reminder.careTypeId === 3) {<span>âœ‚ï¸</span>}
                  @else if (reminder.careTypeId === 4) {<span>ğŸ§´</span>}
                  @else {<span>ğŸ””</span>}
                  {{ reminder.careTypeName }}
                </span>
                <span class="reminder-status" [class.active]="reminder.enabled">{{ reminder.enabled ? 'Äang báº­t' : 'Táº¡m táº¯t' }}</span>
              </div>
              <div class="reminder-info">
                <span class="reminder-next">{{ reminder.nextCareDate ? (reminder.nextCareDate | date:'dd/MM/yyyy') : '---' }}</span>
                <span class="reminder-freq">Táº§n suáº¥t: {{ reminder.frequencyDays ? (reminder.frequencyDays + ' ngÃ y') : '---' }}</span>
                @if (reminder.reminderTime) {<span class="reminder-time">â° {{ reminder.reminderTime }}</span>}
              </div>
              @if (reminder.customMessage) {<div class="reminder-custom-message">{{ reminder.customMessage }}</div>}
            </div>
          }
        </div>
      }
      @if (!loadingCareReminders && careReminders.length === 0) {
        <div class="care-reminders-error">KhÃ´ng cÃ³ lá»‹ch nháº¯c nhá»Ÿ.</div>
      }
    </div>
  </div>
</div>