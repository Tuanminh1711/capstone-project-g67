<app-top-navigator></app-top-navigator>
<div class="user-plant-detail-container">
  <ng-container *ngIf="loading">
    <div class="loading-bar">
      <div class="loading-spinner"></div>
      <span>ƒêang t·∫£i chi ti·∫øt c√¢y...</span>
    </div>
  </ng-container>
  <ng-container *ngIf="!loading && errorMsg">
    <div class="error-msg">
      <span class="error-icon">ü•Ä</span>
      <div>{{ errorMsg }}</div>
    </div>
  </ng-container>
  <ng-container *ngIf="!loading && plant">
    <div class="plant-header">
      <h2>{{ plant.nickname || 'Ch∆∞a ƒë·∫∑t t√™n' }}</h2>
      <span class="plant-id">#{{ plant.userPlantId }}</span>
    </div>
    
    <!-- Hi·ªÉn th·ªã ·∫£nh ho·∫∑c placeholder -->
    <div class="plant-images">
      <ng-container *ngIf="plant.imageUrls && plant.imageUrls.length > 0; else noImages">
        <img *ngFor="let img of plant.imageUrls" [src]="img" alt="·∫¢nh c√¢y" class="plant-img" 
             (error)="onImageError($event)" />
      </ng-container>
      <ng-template #noImages>
        <div class="no-image-placeholder">
          <span class="placeholder-icon">üå±</span>
          <span class="placeholder-text">Ch∆∞a c√≥ ·∫£nh</span>
        </div>
      </ng-template>
    </div>
    
    <div class="plant-info">
      <div class="info-row"><b>Ng√†y tr·ªìng:</b> <span>{{ plant.plantingDate ? (plant.plantingDate | date:'dd/MM/yyyy') : 'Ch∆∞a c·∫≠p nh·∫≠t' }}</span></div>
      <div class="info-row"><b>V·ªã tr√≠:</b> <span>{{ plant.locationInHouse || 'Ch∆∞a c·∫≠p nh·∫≠t' }}</span></div>
      <div class="info-row"><b>Nh·∫Øc nh·ªü:</b> <span [class.enabled]="plant.reminderEnabled">{{ plant.reminderEnabled ? 'B·∫≠t' : 'T·∫Øt' }}</span></div>
    </div>
    
    <div class="plant-images-detail" *ngIf="plant.images && plant.images.length">
      <h4>·∫¢nh & m√¥ t·∫£:</h4>
      <div class="image-detail-list">
        <div class="image-detail-item" *ngFor="let img of plant.images">
          <img [src]="img.imageUrl" alt="·∫¢nh" class="plant-img-detail" 
               (error)="onImageError($event)" />
          <p class="img-desc">{{ img.description }}</p>
        </div>
      </div>
    </div>
  </ng-container>
</div>
