<app-top-navigator></app-top-navigator>

<div class="article-detail-page">
  <div class="banner-blog" style="background-image: url('assets/image/banner_blog.jpg');">
    <div class="banner-overlay"></div>
    <div class="banner-content">
      <div class="banner-category">{{ article?.categoryName || 'KIẾN THỨC VÀ CÁCH CHĂM SÓC, THÔNG TIN VỀ CÂY' }}</div>
      <h1 class="banner-title">{{ article?.title }}</h1>
      <div class="banner-meta">
        <span class="banner-date">POSTED ON {{ article?.createdAt | date:'dd/MM/yyyy' }} BY {{ article?.authorUsername || 'Expert' }}</span>
      </div>
    </div>
  </div>
  
  <div class="main-content-wrapper">
    <div class="content-container">
      <div class="main-content">
        @if (article) {
          <div class="content">
            @if (article.content) {
              <div class="article-content" [innerHTML]="article.content"></div>
            }
            @if (article?.imageUrls?.length) {
              <div class="images-section">
                <div class="images-grid">
                  @for (img of article.imageUrls; track img) {
                    <div class="image-container">
                      <img [src]="img" alt="Ảnh bài viết" />
                    </div>
                  }
                </div>
              </div>
            }
          </div>
        }
        @if (!article) {
          <div class="error">
            <span class="error-icon">⚠️</span>
            Không tìm thấy bài viết.
          </div>
        }
      </div>
      
      <div class="sidebar">
        <div class="sidebar-section">
          <h3 class="sidebar-title">Danh mục bài viết</h3>
          <div class="category-dropdown">
            <button class="dropdown-btn" (click)="toggleDropdown()">
              @if (selectedCategory) {
                <span>{{ selectedCategory.name }}</span>
              }
              @if (!selectedCategory) {
                <span>Chọn danh mục</span>
              }
              <span class="dropdown-arrow" [class.open]="isDropdownOpen">▼</span>
            </button>
            <div class="dropdown-content" [class.show]="isDropdownOpen">
              @for (category of categories; track category) {
                <div class="dropdown-item" (click)="selectCategory(category)">
                  <span class="category-name">{{ category.name }}</span>
                  <span class="category-count">({{ category.count }})</span>
                </div>
              }
            </div>
          </div>
        </div>
        
        <div class="sidebar-section">
          <h3 class="sidebar-title">Bài viết liên quan</h3>
          <div class="related-articles">
            @for (related of relatedArticles; track related) {
              <div class="related-article">
                <div class="related-article-image">
                  <img [src]="related.imageUrl || 'assets/image/default-plant.jpg'" [alt]="related.title" />
                </div>
                <div class="related-article-content">
                  <h4>{{ related.title }}</h4>
                  <p>{{ related.excerpt }}</p>
                </div>
              </div>
            }
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


