
<app-expert-layout>
  <div class="categories-page">
    <div class="categories-header">
      <h2><span class="icon">🗂️</span> Quản lý chuyên mục</h2>
      <p class="desc">Tạo, chỉnh sửa, xóa các chuyên mục bài viết cho chuyên gia.</p>
    </div>
    <div class="categories-card">
      <form [formGroup]="categoryForm" (ngSubmit)="submitCategory()">
        <div class="form-row">
          <label><span class="icon">🏷️</span> Tên chuyên mục</label>
          <input formControlName="name" placeholder="Nhập tên chuyên mục" />
        </div>
        <div class="form-row">
          <label><span class="icon">📝</span> Mô tả</label>
          <textarea formControlName="description" placeholder="Mô tả chuyên mục"></textarea>
        </div>
        <div class="form-actions">
          <button type="submit" [disabled]="categoryForm.invalid || isLoading" class="btn-main">
            {{ editMode ? 'Cập nhật' : 'Tạo mới' }}
          </button>
          <button type="button" (click)="resetForm()" *ngIf="editMode" class="btn-cancel">Hủy</button>
        </div>
      </form>
      <div *ngIf="error" class="error">{{ error }}</div>
      <div *ngIf="isLoading" class="loading">Đang tải...</div>
    </div>
    <div class="categories-list-card" *ngIf="categories.length">
      <table class="categories-table">
        <thead>
          <tr>
            <th><span class="icon">🏷️</span> Tên chuyên mục</th>
            <th><span class="icon">📝</span> Mô tả</th>
            <th>Hành động</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let category of categories">
            <td>{{ category.name }}</td>
            <td>{{ category.description }}</td>
            <td>
              <button (click)="editCategory(category)" class="btn-edit">Sửa</button>
              <button (click)="deleteCategory(category.id)" class="btn-delete">Xóa</button>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="pagination" *ngIf="totalPages > 1">
        <button (click)="changePage(pageNo - 1)" [disabled]="pageNo === 0">Trước</button>
        <span>Trang {{ pageNo + 1 }} / {{ totalPages }}</span>
        <button (click)="changePage(pageNo + 1)" [disabled]="pageNo + 1 >= totalPages">Sau</button>
      </div>
    </div>
    <div *ngIf="!categories.length && !isLoading" class="empty-list">
      <span class="icon">📭</span> Chưa có chuyên mục nào.
    </div>
  </div>
</app-expert-layout>
