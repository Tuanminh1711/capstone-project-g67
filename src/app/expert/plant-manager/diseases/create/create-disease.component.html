<div class="create-disease-container">
  <div class="form-header">
    <h2>ğŸŒ¿ Táº¡o bá»‡nh cÃ¢y má»›i</h2>
    <p>ThÃªm thÃ´ng tin chi tiáº¿t vá» bá»‡nh cÃ¢y vÃ  phÆ°Æ¡ng phÃ¡p Ä‘iá»u trá»‹</p>
  </div>

  <div class="progress-bar" *ngIf="loading">
    <div class="progress-fill"></div>
  </div>

  <form [formGroup]="diseaseForm" (ngSubmit)="onSubmit()" class="disease-form">
    
    <!-- TÃªn bá»‡nh -->
    <div class="form-group">
      <label for="diseaseName" class="form-label">ğŸ¦  TÃªn bá»‡nh *</label>
      <input 
        type="text" 
        id="diseaseName"
        formControlName="diseaseName"
        class="form-input"
        [class.error]="isFieldInvalid('diseaseName')"
        placeholder="VÃ­ dá»¥: Bá»‡nh Ä‘á»‘m lÃ¡ nÃ¢u"
        autocomplete="off">
      <div class="error-message" *ngIf="isFieldInvalid('diseaseName')">
        âš ï¸ {{ getFieldError('diseaseName') }}
      </div>
    </div>

    <!-- TÃªn khoa há»c -->
    <div class="form-group">
      <label for="scientificName" class="form-label">ğŸ”¬ TÃªn khoa há»c</label>
      <input 
        type="text" 
        id="scientificName"
        formControlName="scientificName"
        class="form-input"
        placeholder="VÃ­ dá»¥: Alternaria alternata"
        autocomplete="off">
    </div>

    <!-- Loáº¡i bá»‡nh -->
    <div class="form-group">
      <label for="category" class="form-label">ğŸ“‚ Loáº¡i bá»‡nh *</label>
      <select 
        id="category"
        formControlName="category"
        class="form-input"
        [class.error]="isFieldInvalid('category')">
        <option value="Náº¥m">ğŸ„ Bá»‡nh do náº¥m</option>
        <option value="Vi khuáº©n">ğŸ¦  Bá»‡nh do vi khuáº©n</option>
        <option value="Virus">ğŸ§¬ Bá»‡nh do virus</option>
        <option value="Sinh lÃ½">ğŸŒ¡ï¸ Bá»‡nh sinh lÃ½</option>
        <option value="CÃ´n trÃ¹ng">ğŸ› SÃ¢u bá»‡nh cÃ´n trÃ¹ng</option>
      </select>
      <div class="error-message" *ngIf="isFieldInvalid('category')">
        âš ï¸ {{ getFieldError('category') }}
      </div>
    </div>

    <!-- Má»©c Ä‘á»™ nghiÃªm trá»ng -->
    <div class="form-group">
      <label for="severity" class="form-label">âš ï¸ Má»©c Ä‘á»™ nghiÃªm trá»ng *</label>
      <select 
        id="severity"
        formControlName="severity"
        class="form-input"
        [class.error]="isFieldInvalid('severity')">
        <option value="LOW">ğŸŸ¢ Tháº¥p</option>
        <option value="MEDIUM">ğŸŸ¡ Trung bÃ¬nh</option>
        <option value="HIGH">ğŸŸ  Cao</option>
        <option value="CRITICAL">ğŸ”´ Ráº¥t cao</option>
      </select>
      <div class="error-message" *ngIf="isFieldInvalid('severity')">
        âš ï¸ {{ getFieldError('severity') }}
      </div>
    </div>

    <!-- Triá»‡u chá»©ng -->
    <div class="form-group">
      <label for="symptoms" class="form-label">ğŸ” Triá»‡u chá»©ng *</label>
      <textarea 
        id="symptoms"
        formControlName="symptoms"
        class="form-textarea"
        [class.error]="isFieldInvalid('symptoms')"
        placeholder="MÃ´ táº£ chi tiáº¿t cÃ¡c triá»‡u chá»©ng cá»§a bá»‡nh..."
        rows="4"></textarea>
      <div class="error-message" *ngIf="isFieldInvalid('symptoms')">
        âš ï¸ {{ getFieldError('symptoms') }}
      </div>
    </div>

    <!-- NguyÃªn nhÃ¢n -->
    <div class="form-group">
      <label for="causes" class="form-label">ğŸ”¬ NguyÃªn nhÃ¢n *</label>
      <textarea 
        id="causes"
        formControlName="causes"
        class="form-textarea"
        [class.error]="isFieldInvalid('causes')"
        placeholder="MÃ´ táº£ nguyÃªn nhÃ¢n gÃ¢y ra bá»‡nh..."
        rows="4"></textarea>
      <div class="error-message" *ngIf="isFieldInvalid('causes')">
        âš ï¸ {{ getFieldError('causes') }}
      </div>
    </div>

    <!-- PhÆ°Æ¡ng phÃ¡p Ä‘iá»u trá»‹ -->
    <div class="form-group">
      <label for="treatment" class="form-label">ğŸ’Š PhÆ°Æ¡ng phÃ¡p Ä‘iá»u trá»‹</label>
      <textarea 
        id="treatment"
        formControlName="treatment"
        class="form-textarea"
        placeholder="MÃ´ táº£ cÃ¡c phÆ°Æ¡ng phÃ¡p Ä‘iá»u trá»‹..."
        rows="4"></textarea>
    </div>

    <!-- PhÆ°Æ¡ng phÃ¡p phÃ²ng ngá»«a -->
    <div class="form-group">
      <label for="prevention" class="form-label">ğŸ›¡ï¸ PhÆ°Æ¡ng phÃ¡p phÃ²ng ngá»«a *</label>
      <textarea 
        id="prevention"
        formControlName="prevention"
        class="form-textarea"
        [class.error]="isFieldInvalid('prevention')"
        placeholder="MÃ´ táº£ cÃ¡c biá»‡n phÃ¡p phÃ²ng ngá»«a..."
        rows="4"></textarea>
      <div class="error-message" *ngIf="isFieldInvalid('prevention')">
        âš ï¸ {{ getFieldError('prevention') }}
      </div>
    </div>

    <!-- Loáº¡i cÃ¢y bá»‹ áº£nh hÆ°á»Ÿng -->
    <div class="form-group">
      <label for="affectedPlantTypes" class="form-label">ğŸŒ± Loáº¡i cÃ¢y bá»‹ áº£nh hÆ°á»Ÿng</label>
      <input 
        type="text" 
        id="affectedPlantTypes"
        formControlName="affectedPlantTypes"
        class="form-input"
        placeholder="VÃ­ dá»¥: CÃ¢y Äƒn quáº£, cÃ¢y lÃ¡ kim..."
        autocomplete="off">
    </div>

    <!-- Má»©c Ä‘á»™ tin cáº­y -->
    <div class="form-group">
      <label for="confidenceLevel" class="form-label">ğŸ“Š Má»©c Ä‘á»™ tin cáº­y</label>
      <input 
        type="text" 
        id="confidenceLevel"
        formControlName="confidenceLevel"
        class="form-input"
        placeholder="VÃ­ dá»¥: 95%, Cao, Trung bÃ¬nh..."
        autocomplete="off">
    </div>

    <div class="form-actions">
      <button type="button" class="btn-secondary" (click)="onCancel()">
        <span class="button-icon">âŒ</span>
        Há»§y
      </button>
      <button type="button" class="btn-secondary" (click)="resetForm()">
        <span class="button-icon">ğŸ”„</span>
        Reset
      </button>
      <button type="submit" class="btn-primary" [disabled]="diseaseForm.invalid || loading">
        <span class="button-icon">ğŸ’¾</span>
        <span *ngIf="!loading">Táº¡o má»›i</span>
        <span *ngIf="loading">Äang táº¡o...</span>
      </button>
    </div>
  </form>
</div>
