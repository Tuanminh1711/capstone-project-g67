
<app-expert-layout>
	<div class="create-article-wrapper">
		<div class="create-article-header">
			<h2><span class="icon">ğŸ“</span> Táº¡o bÃ i viáº¿t má»›i</h2>
			<p class="desc">Chia sáº» kiáº¿n thá»©c, kinh nghiá»‡m vÃ  thÃ´ng tin há»¯u Ã­ch vá» cÃ¢y trá»“ng cho cá»™ng Ä‘á»“ng.</p>
		</div>
		<form [formGroup]="articleForm" (ngSubmit)="submitArticle()" class="create-article-form">
			<div class="form-row">
				<label><span class="icon">ğŸŒ±</span> TiÃªu Ä‘á» bÃ i viáº¿t</label>
				<input formControlName="title" placeholder="Nháº­p tiÃªu Ä‘á»" />
			</div>
			<div class="form-row">
				<label><span class="icon">ğŸ—‚ï¸</span> ChuyÃªn má»¥c</label>
				<div class="category-select-row">
					<select formControlName="categoryId">
						<option value="" disabled selected>Chá»n chuyÃªn má»¥c</option>
						<option *ngFor="let cat of categories" [value]="cat.id">{{ cat.categoryName }}</option>
					</select>
					<button type="button" class="btn-create-category" (click)="toggleCategoryForm()"><span class="icon">â•</span> Táº¡o chuyÃªn má»¥c má»›i</button>
				</div>
			</div>
			<div *ngIf="showCategoryForm" class="category-form-inline">
				<div [formGroup]="categoryForm">
					<h3><span class="icon">ğŸ—‚ï¸</span> Táº¡o chuyÃªn má»¥c má»›i</h3>
					<div class="form-row">
						<label>TÃªn chuyÃªn má»¥c</label>
						<input formControlName="name" placeholder="Nháº­p tÃªn chuyÃªn má»¥c" />
					</div>
					<div class="form-row">
						<label>MÃ´ táº£</label>
						<textarea formControlName="description" placeholder="MÃ´ táº£ chuyÃªn má»¥c"></textarea>
					</div>
					<div class="form-actions">
						<button type="button" [disabled]="categoryForm.invalid || isLoading" class="btn-main" (click)="submitCategory()">Táº¡o chuyÃªn má»¥c</button>
						<button type="button" (click)="toggleCategoryForm()" class="btn-cancel">Há»§y</button>
					</div>
					<div *ngIf="error" class="error">{{ error }}</div>
					<div *ngIf="success" class="success">{{ success }}</div>
				</div>
			</div>
									<div class="form-row">
											<label><span class="icon">ğŸ“„</span> Ná»™i dung</label>
											<div class="markdown-note">
												<span class="icon">â„¹ï¸</span> <b>LÆ°u Ã½ nháº­p ná»™i dung:</b>
												<ul>
													<li><span class="icon">#ï¸âƒ£</span> <b>DÃ¹ng <code>##</code> Ä‘á»ƒ táº¡o tiÃªu Ä‘á» lá»›n (h2), <code>###</code> cho tiÃªu Ä‘á» nhá» (h3), <code>####</code> cho tiÃªu Ä‘á» phá»¥ (h4).</b></li>
													<li><span class="icon">â†©ï¸</span> <b>Xuá»‘ng dÃ²ng 2 láº§n Ä‘á»ƒ táº¡o khoáº£ng cÃ¡ch Ä‘oáº¡n.</b></li>
												</ul>
											</div>
											<textarea formControlName="content" rows="8" placeholder="Nháº­p ná»™i dung bÃ i viáº¿t..." class="content-input"></textarea>
									</div>
			<div class="form-row">
				<label><span class="icon">ğŸ–¼ï¸</span> áº¢nh bÃ i viáº¿t</label>
				<input type="file" accept="image/*" (change)="onImageSelected($event)" />
				<div *ngIf="imagePreview" class="image-preview">
					<img [src]="imagePreview" alt="Preview" />
				</div>
				<div *ngIf="uploadedImageUrl && !isLoading" class="upload-success"><span class="icon">âœ…</span> áº¢nh Ä‘Ã£ upload thÃ nh cÃ´ng!</div>
				<div *ngIf="isLoading" class="loading"><span class="icon">â³</span> Äang upload áº£nh...</div>
			</div>
			<div class="form-actions">
				<button type="submit" [disabled]="articleForm.invalid || isLoading" class="btn-main big-btn"><span class="icon">ğŸŒ³</span> ÄÄƒng bÃ i viáº¿t</button>
			</div>
			<div *ngIf="error" class="error">{{ error }}</div>
			<div *ngIf="success" class="success">{{ success }}</div>
			<div *ngIf="isLoading && !uploadedImageUrl" class="loading">Äang xá»­ lÃ½...</div>
		</form>
	</div>
</app-expert-layout>
